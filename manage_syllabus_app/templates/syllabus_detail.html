{% extends 'base.html' %}

{% block content%}
<div class="container my-5 p-4 p-md-5 content-wrapper shadow-sm rounded">

    <div class="text-center mb-5 syllabus-header">
        <h6>BỘ GIÁO DỤC VÀ ĐÀO TẠO</h6>
        <h6>TRƯỜNG ĐẠI HỌC MỞ THÀNH PHỐ HỒ CHÍ MINH</h6>
        <h2 class="mt-4">ĐỀ CƯƠNG MÔN HỌC</h2>
        <h5 class="text-uppercase">Course Specification</h5>
    </div>

    {% for part in syllabus.main_sections %}

        {# Include động file linh kiện dựa trên 'part.code' #}
        {% include 'partials/_' + part.code + '.html' %}

    {% endfor %}
    <!--        <tr>-->
    <!--            <th scope="row">c. Địa chỉ email liên hệ/Email</th>-->
    <!--            {# Giả sử bạn sẽ thêm trường 'email' vào model Lecturer #}-->
    <!--            <td>{{ syllabus.lecturer.email }}</td>-->
    <!--        </tr>-->
    <!--        <tr>-->
    <!--            <th scope="row">d. Phòng làm việc/Room</th>-->
    <!--            {# Giả sử bạn sẽ thêm trường 'office_location' vào model Lecturer #}-->
    <!--            <td>{{ syllabus.lecturer.office_location }}</td>-->
    <!--        </tr>-->
    <h3 class="section-title text-uppercase mb-3">II. Thông tin về môn học / Course overview</h3>

    <h4 class="mb-2">1. Mô tả môn học / Course description</h4>
    {# Giả sử bạn sẽ thêm trường 'description' vào model Subject #}
    <p style="text-align: justify;">
        Cập nhật sau
    </p>

   <h4 class="mt-4 mb-2">2. Môn học điều kiện / Requirements</h4>
    <table class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th scope="col" style="width: 10%;">STT/No.</th>
                <th scope="col" style="width: 50%;">Môn học điều kiện/Requirements</th>
                <th scope="col" style="width: 40%;">Mã môn học/Code</th>
            </tr>
        </thead>
        <tbody>
            {#
          Lặp qua 'required_by_relation' để lấy danh sách các môn yêu cầu cho môn này.
          Đây là danh sách các đối tượng RequirementSubject.
        #}
        {% for req_relation in syllabus.subject.required_by_relation %}
        <tr>
            <td class="text-center">{{ loop.index }}</td>
            <td>{{ req_relation.require_subject.name }}/{{ req_relation.type_requirement.name }}</td>
            <td>{{ req_relation.require_subject.id }}</td>
        </tr>
        {% endfor %}

        {# Thêm một dòng thông báo nếu không có môn học điều kiện nào #}
        {% if not syllabus.subject.required_by_relation %}
            <tr>
                <td colspan="4" class="text-center">Không có môn học điều kiện.</td>
            </tr>
        {% endif %}
        </tbody>
    </table>
    <h3 class="section-title text-uppercase mb-3">Tài liệu tham khảo / Learning Materials</h3>
    <table class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th scope="col" style="width: 10%;">STT</th>
                <th scope="col" style="width: 60%;">Tên tài liệu</th>
                <th scope="col" style="width: 30%;">Loại tài liệu</th>
            </tr>
        </thead>
        <tbody>
            {% for material in syllabus.learning_materials %}
            <tr>
                <td class="text-center">{{ loop.index }}</td>
                <td>{{ material.name }}</td>
                <td>{{ material.type_material.name }}</td>
            </tr>
            {% endfor %}
            {% if not syllabus.learning_materials %}
            <tr>
                <td colspan="3" class="text-center">Chưa có tài liệu tham khảo.</td>
            </tr>
            {% endif %}
        </tbody>
    </table>

    <div class="text-center mt-5">
        <a href="{{ url_for('index') }}" class="btn btn-custom px-4 py-2">&laquo; Quay lại danh sách</a>
    </div>

</div>
    <div class="text-center mt-5">
        <a href="{{ url_for('index') }}" class="btn btn-custom px-4 py-2">&laquo; Quay lại danh sách</a>
    </div>
</div>
{% endblock%}